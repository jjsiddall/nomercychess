<!-- <button type="button" class="btn btn-danger" id="test">
  simple collapsible
</button> -->

<div class="row">
  <!-- Left column: the board  -->
  <div class="span7">
    <%= render 'board' %>   
  </div>
  <!-- Right column: the moves  -->
    <div class="span5">
      <%- model_class = Exercise -%>
      <div class="page-header" data-modal="yes">
        <h1><%=t '.title', :default => @exercise.title %><a data-toggle="modal" href="#descriptionModal" class="btn btn-mini btn-primary">...</a></h1>
          <button id="nextMove" class='btn btn-primary'>Next Move</button>
          <!-- <button id="prevMove" class='btn btn-primary'>Previous</button> -->
      </div>
    <!-- Puts all the move on the screen in the format to show them -->
      <div class="accordion" id="accordion2">
        <% @exercise.moves.each do |move| %>
        <div class="accordion-group notShownMove" data-accordionNumber="<%= move.move_number %>" data-white="<%= move.piece_white %>:<%= move.starting_coordinate_white %>-<%= move.ending_coordinate_white %>" data-black="<%= move.piece_black %>:<%= move.starting_coordinate_black %>-<%= move.ending_coordinate_black %>">
          <div class="accordion-heading">
            <a id="toggleMe-<%= move.move_number %>" class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#accordion2" href="#collapse-<%= move.move_number %>">
              <table>
                <tr>
                  <td class="moveTableFirstColumn"><%= move.move_number %></td>
                  <td class="moveTableNonfirstColumn"><%= move.piece_white %><%= move.ending_coordinate_white %></td>
                  <td class="moveTableNonfirstColumn"><%= move.piece_black %><%= move.ending_coordinate_black %></td>
                </tr>
              </table>
            </a>
          </div>
          <div id="collapse-<%= move.move_number %>" class="accordion-body collapse">
            <div class="accordion-inner">
              <%= move.explanation %>
            </div>
          </div>
        </div>
        <% end %>
      </div>
  </div>
</div>

<!-- Opening Modal: describes lesson start -->
<div id="descriptionModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="descriptionModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="descriptionModalLabel"><%= @exercise.title %></h3>
  </div>
  <div class="modal-body">
    <%= @exercise.description %>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal">Close</button>
  </div>
</div>

<!-- Closing Modal: describes the lessons conclusion -->
<div id="conclusionModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="descriptionModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="descriptionModalLabel">Exercise Complete!</h3>
  </div>
  <div class="modal-body">
    <%= @exercise.description %>
  </div>

  <div class="modal-footer">
    <%= link_to "Show it again", exercise_path(@exercise.id), :class => 'btn' %>
    <button class="btn" data-dismiss="modal">Stay Here</button>
    <%= link_to "Practice It!", practice_exercise_path(@exercise.id), :class => 'btn btn-primary btn-large' %>    
  </div>
</div>



